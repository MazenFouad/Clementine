<!-- Loopple Templates: https://www.loopple.com/templates | Copyright Loopple (https://www.loopple.com) | This copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Profile Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
    <link rel="stylesheet"
        href="https://rawcdn.githack.com/Loopple/loopple-public-assets/ad60f16c8a16d1dcad75e176c00d7f9e69320cd4/argon-dashboard/css/nucleo/css/nucleo.css">
    <link rel="stylesheet" href="/css/theme.css">

</head>

<body>
    <!-- navbar start -->
    <%- include('../partials/userprofile') %>
        <div class="container-fluid pt-3">
            <div class="row removable">
                <div class="col-lg-4">
                    <div class="card card-profile">
                        <div class="row justify-content-center">
                            <div class="col-lg-3 order-lg-2">
                                <div class="card-profile-image">
                                    <a href="#">
                                        <img src="/Images/pfp.webp" class="rounded-circle">
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="card-header text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4">
                            <div class="d-flex justify-content-between">
                                <a href="/userprofile/editprofile" class="btn btn-sm mr-4 btn-default">Edit</a>
                            </div>
                        </div>
                        <div class="card-body pt-0">
                            <div class="row">
                                <div class="col">
                                    <div class="card-profile-stats d-flex justify-content-center">
                                        <div>
                                            <span class="heading">
                                                <%= user.orders.length %>
                                            </span>
                                            <span class="description">Orders</span>
                                        </div>
                                        <div>
                                            <% if (cart !=undefined) {%>
                                                <span class="heading">
                                                    <%= cart.items.length %>
                                                </span>
                                                <% } else {%>
                                                    <span class="heading">0</span>
                                                    <% } %>
                                                        <span class="description">Cart</span>
                                        </div>
                                        <div>
                                            <span class="heading">
                                                <%= user.wishlist.length %>
                                            </span>
                                            <span class="description">wishlist</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <h5 class="h3">
                                    <%= user.firstname + ' ' + user.lastname %><span class="font-weight-light">
                                </h5>
                            </div>
                            <div class="text-center">
                                <h5 class="h3">
                                    <%= user.email %><span class="font-weight-light">
                                </h5>
                            </div>
                        </div>
                    </div>
                </div>

                <% if(orders !='' ) {%>
                    <div class="col-lg-8">
                        <% var count = 0; orders.forEach((order)=>{ %>
                            <div class="card">
                                <div class="card-header bg-transparent">
                                    <h6 class="text-uppercase text-muted ls-1 mb-1"></h6>
                                    <h5 class="h3 mb-0">Order <%= count += 1 %></h5>
                                    <div class="text-uppercase">Order <%= order._id %>

                                            <div class="blue-label ms-auto text-uppercase">paid</div>
                                    </div>
                                    <div class="fs-8">Products #<%= order.orderItems.length %>
                                    </div>
                                    <div class="fs-8">
                                        <%= order.dateOrdered %>
                                    </div>
                                    <div class="d-sm-flex align-items-sm-start justify-content-sm-between">

                                        <% if (order.status==="Shipped" ) { %>
                                            <div class="status">Status : <p class="status_shipped">Shipped</p>
                                            </div>
                                            <% } else if (order.status==="Delivered" ) { %>
                                                <div class="status">Status : <p class="status_delivered">Delivered</p>
                                                </div>
                                                <% } else if (order.status==="Pending" ) { %>
                                                    <div class="status">Status : <p class="status_pending">Pending</p>
                                                    </div>
                                                    <% } else if (order.status==="Cancelled" ) { %>
                                                        <div class="status">Status : <p class="status_cancelled">
                                                                Cancelled
                                                            </p>
                                                        </div>
                                                        <% } %>
                                    </div>
                                    <a href='/userprofile/order/<%- order._id %>'>
                                        <button class="btn btn-primary text-uppercase">order
                                            info
                                        </button></a>


                                </div>

                            </div>

                            <% })} %>
                                <div class="card-body">

                                </div>

                    </div>
            </div>
        </div>
        
        
        <script
            src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/jquery.min.js"></script>
        <script
            src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/bootstrap.bundle.min.js"></script>
        <script
            src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/js.cookie.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
        <script
            src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/chart.extension.js"></script>
        <script
            src="https://rawcdn.githack.com/Loopple/loopple-public-assets/7bb803d2af2ab6d71d429b0cb459c24a4cd0fbb4/argon-dashboard/js/argon.min.js"></script>
</body>
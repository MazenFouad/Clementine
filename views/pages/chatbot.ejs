<!DOCTYPE html>
<html>
<head>
  <title>Chat App</title>
  <style>
    .user-message {
      background-color: #cce5ff;
    }
    .response-message {
      background-color: #e2e3e5;
    }
  </style>
</head>
<body>
  <h1>Chat App</h1>
  <div id="chat" class="mt-4"></div>
  <div class="mt-4">
    <input type="text" id="messageInput" placeholder="Type your message">
    <button id="sendButton">Send</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var sendButton = document.getElementById('sendButton');
      var messageInput = document.getElementById('messageInput');
      var chat = document.getElementById('chat');

      sendButton.addEventListener('click', function() {
        var message = messageInput.value;
        sendMessage(message);
      });

      messageInput.addEventListener('keypress', function(event) {
        if (event.which === 13) {
          var message = messageInput.value;
          sendMessage(message);
        }
      });

      function sendMessage(message) {
        messageInput.value = '';

        var userMessage = document.createElement('div');
        userMessage.classList.add('user-message');
        userMessage.innerText = 'You: ' + message;
        chat.appendChild(userMessage);

        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/api');
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function() {
          if (xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);

            var responseMessage = document.createElement('div');
            responseMessage.classList.add('response-message');
            responseMessage.innerText = 'Server: ' + response.message;
            chat.appendChild(responseMessage);
          }
        };
        xhr.send(JSON.stringify({ message: message }));
      }
    });
  </script>
</body>
</html>
